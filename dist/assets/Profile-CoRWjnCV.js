var e=Object.defineProperty,__name=(s,t)=>e(s,"name",{value:t,configurable:!0});import{u as s,r as t,j as a,k as l,a1 as r,b as i,a8 as n,a7 as o,G as d,N as c,X as m,ae as x,C as h}from"./vendor-react-B3cVin9Q.js";import{u as b}from"./index-BxZ87--W.js";import"./vendor-other-D9QTidg2.js";import"./vendor-three-DgmlkwHn.js";import"./vendor-i18n-DgyYewF3.js";import"./page-admin-cU6anLI0.js";import"./vendor-supabase-BYHeWUli.js";const p=__name(({onBack:e})=>{const{t:p}=s(),{user:u,updateUserProfile:g}=b(),[j,f]=t.useState(!1),[N,w]=t.useState(!1),[v,y]=t.useState(null),[k,C]=t.useState(""),[S,_]=t.useState(""),[A,E]=t.useState(""),[P,R]=t.useState({});if(!u)return null;const q=__name(e=>e?new Date(e).toLocaleString():p("profile.notAvailable"),"formatDate"),B=__name(()=>{C(u.name||""),_(u.bk_centre_name||""),E(u.mobile_e164||""),R({}),y(null),f(!0)},"handleEditClick"),D=__name(()=>{f(!1),R({}),y(null)},"handleCancelEdit"),I=__name(()=>{const e={};return k.trim()||(e.name=p("profile.nameRequired")),S.trim()||(e.centreName=p("profile.centreNameRequired")),A.trim()&&A.startsWith("+")||(e.mobile=p("profile.invalidMobile")),R(e),0===Object.keys(e).length},"validateForm"),L=__name(async()=>{if(!I())return;w(!0),y(null);const e=await g({name:k,bk_centre_name:S,mobile_e164:A});w(!1),e.success?(y({type:"success",text:p("profile.updateSuccess")}),f(!1),setTimeout(()=>y(null),5e3)):y({type:"error",text:e.error||p("profile.updateError")})},"handleSaveChanges");return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-teal-800 to-emerald-900 text-white",children:a.jsxs("div",{className:"container mx-auto px-4 py-8",children:[a.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-teal-300 hover:text-teal-200 transition-colors mb-6",children:[a.jsx(l,{className:"w-5 h-5"}),p("common.back")]}),a.jsx("div",{className:"max-w-4xl mx-auto",children:a.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 shadow-2xl border border-white/20",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(r,{className:"w-10 h-10 text-teal-300"}),a.jsx("h1",{className:"text-3xl font-bold",children:p("profile.title")})]}),!j&&a.jsxs("button",{onClick:B,className:"flex items-center gap-2 bg-teal-600 hover:bg-teal-700 px-4 py-2 rounded-lg transition-colors",children:[a.jsx(i,{className:"w-4 h-4"}),p("profile.editButton")]})]}),v&&a.jsx("div",{className:"mb-6 p-4 rounded-lg "+("success"===v.type?"bg-green-500/20 border border-green-500/50 text-green-100":"bg-red-500/20 border border-red-500/50 text-red-100"),children:v.text}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("section",{children:[a.jsxs("h2",{className:"text-xl font-semibold text-teal-300 mb-4 flex items-center gap-2",children:[a.jsx(r,{className:"w-5 h-5"}),p("profile.personalInfo")]}),a.jsxs("div",{className:"bg-white/5 rounded-xl p-6 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-white/70 text-sm mb-2 block",children:p("profile.name")}),a.jsxs("div",j?{children:[a.jsx("input",{type:"text",value:k,onChange:__name(e=>C(e.target.value),"onChange"),className:"w-full bg-white/10 px-4 py-3 rounded-lg border border-white/20 text-white focus:outline-none focus:ring-2 focus:ring-teal-400",placeholder:p("profile.name")}),P.name&&a.jsx("p",{className:"text-red-400 text-sm mt-1",children:P.name})]}:{className:"flex items-center gap-3 bg-white/10 px-4 py-3 rounded-lg border border-white/10",children:[a.jsx(r,{className:"w-5 h-5 text-teal-400"}),a.jsx("span",{className:"text-white font-medium",children:u.name||p("profile.notAvailable")})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-white/70 text-sm mb-2 block",children:p("profile.mobileNumber")}),a.jsxs("div",j?{children:[a.jsx(n,{country:"in",value:A,onChange:__name(e=>E(e.startsWith("+")?e:`+${e}`),"onChange"),inputStyle:{width:"100%",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"0.5rem",color:"white",padding:"0.75rem 3rem",fontSize:"1rem"},buttonStyle:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"0.5rem 0 0 0.5rem"},dropdownStyle:{background:"#1e293b",color:"white"},containerClass:"phone-input-container",enableSearch:!0,searchPlaceholder:"Search country..."}),P.mobile&&a.jsx("p",{className:"text-red-400 text-sm mt-1",children:P.mobile})]}:{className:"flex items-center gap-3 bg-white/10 px-4 py-3 rounded-lg border border-white/10",children:[a.jsx(o,{className:"w-5 h-5 text-teal-400"}),a.jsx("span",{className:"text-white font-medium",children:u.mobile_e164||p("profile.notAvailable")})]})]})]}),u.email&&a.jsxs("div",{children:[a.jsx("label",{className:"text-white/70 text-sm mb-2 block",children:p("profile.email")}),a.jsxs("div",{className:"flex items-center gap-3 bg-white/10 px-4 py-3 rounded-lg border border-white/10",children:[a.jsx(d,{className:"w-5 h-5 text-teal-400"}),a.jsx("span",{className:"text-white font-medium",children:u.email})]})]})]})]}),a.jsxs("section",{children:[a.jsxs("h2",{className:"text-xl font-semibold text-teal-300 mb-4 flex items-center gap-2",children:[a.jsx(c,{className:"w-5 h-5"}),p("profile.bkCentreInfo")]}),a.jsx("div",{className:"bg-white/5 rounded-xl p-6",children:a.jsxs("div",{children:[a.jsx("label",{className:"text-white/70 text-sm mb-2 block",children:p("profile.bkCentreName")}),a.jsxs("div",j?{children:[a.jsx("input",{type:"text",value:S,onChange:__name(e=>_(e.target.value),"onChange"),className:"w-full bg-white/10 px-4 py-3 rounded-lg border border-white/20 text-white focus:outline-none focus:ring-2 focus:ring-teal-400",placeholder:p("profile.bkCentreName")}),P.centreName&&a.jsx("p",{className:"text-red-400 text-sm mt-1",children:P.centreName})]}:{className:"flex items-center gap-3 bg-white/10 px-4 py-3 rounded-lg border border-white/10",children:[a.jsx(c,{className:"w-5 h-5 text-teal-400"}),a.jsx("span",{className:"text-white font-medium",children:u.bk_centre_name||p("profile.notAvailable")})]})]})})]}),j&&a.jsxs("div",{className:"flex gap-4 justify-end",children:[a.jsxs("button",{onClick:D,disabled:N,className:"flex items-center gap-2 bg-gray-600 hover:bg-gray-700 disabled:bg-gray-500 disabled:cursor-not-allowed px-6 py-3 rounded-lg transition-colors",children:[a.jsx(m,{className:"w-4 h-4"}),p("profile.cancelEdit")]}),a.jsxs("button",{onClick:L,disabled:N,className:"flex items-center gap-2 bg-teal-600 hover:bg-teal-700 disabled:bg-teal-500 disabled:cursor-not-allowed px-6 py-3 rounded-lg transition-colors",children:[a.jsx(x,{className:"w-4 h-4"}),p(N?"common.saving":"profile.saveChanges")]})]}),!1,u.last_login&&a.jsxs("section",{children:[a.jsxs("h2",{className:"text-xl font-semibold text-teal-300 mb-4 flex items-center gap-2",children:[a.jsx(h,{className:"w-5 h-5"}),p("profile.accountActivity")]}),a.jsx("div",{className:"bg-white/5 rounded-xl p-6",children:a.jsxs("div",{children:[a.jsx("label",{className:"text-white/70 text-sm mb-2 block",children:p("profile.lastLogin")}),a.jsxs("div",{className:"flex items-center gap-3 bg-white/10 px-4 py-3 rounded-lg border border-white/10",children:[a.jsx(h,{className:"w-5 h-5 text-teal-400"}),a.jsx("span",{className:"text-white font-medium",children:q(u.last_login)})]})]})})]})]})]})})]})})},"Profile");export{p as Profile};
