var e=Object.defineProperty,__name=(t,n)=>e(t,"name",{value:n,configurable:!0});import{u as t,r as n,j as r,a9 as a,a1 as s,N as o,a7 as i,a8 as l,G as d,aa as c,c as m,ab as h}from"./vendor-react-B3cVin9Q.js";import{u}from"./index-BxZ87--W.js";import{L as b}from"./page-admin-cU6anLI0.js";import{r as p}from"./location-dcz9V2s_.js";import{r as x,f as g}from"./geocoding-ryAQYms7.js";import"./vendor-other-D9QTidg2.js";import"./vendor-three-DgmlkwHn.js";import"./vendor-i18n-DgyYewF3.js";import"./vendor-supabase-BYHeWUli.js";const j=__name(()=>{const{t:e}=t(),{register:j}=u(),[w,N]=n.useState({name:"",bk_centre_name:"",mobile_e164:""}),[v,f]=n.useState({}),[_,y]=n.useState("idle"),[k,C]=n.useState(""),[S,q]=n.useState(!1),[P,B]=n.useState(!1),[D,E]=n.useState(""),[L,A]=n.useState({name:"",mobile_e164:"",bk_centre_name:""});n.useEffect(()=>{F()},[]);const F=__name(async()=>{y("requesting"),C("");try{const e=await p(),t=await x(e.latitude,e.longitude);if(t.success){const n={...t,latitude:e.latitude,longitude:e.longitude,location_source:"gps",address_source:"gps_geocoded",location_accuracy:e.accuracy};f(n),y("success")}else C(t.error||"Failed to get address from location"),y("error")}catch(e){"PERMISSION_DENIED"===e.code?(y("denied"),C("Location permission denied. You can enter your location manually.")):(y("error"),C("Unable to get location. You can enter it manually."))}},"requestLocationPermission"),I=__name(e=>e?/^[A-Za-z ]+$/.test(e)?"":"Name should only contain letters and spaces":"Name is required","validateName"),M=__name(e=>e?"":"BK Centre Name is required","validateCentreName"),$=__name(e=>e?e.replace(/\D/g,"").length<10?"Please enter a valid 10-digit mobile number":"":"Mobile number is required","validateMobileNumber"),K=__name(()=>!(!w.name||!w.bk_centre_name||!w.mobile_e164||L.name||L.mobile_e164||L.bk_centre_name),"isFormValid"),R=__name(e=>{const t=e.startsWith("+")?e:`+${e}`;N(e=>({...e,mobile_e164:t})),A(t=>({...t,mobile_e164:$(e)}))},"handlePhoneChange"),z=__name(async t=>{t.preventDefault(),E(""),q(!0);const n=I(w.name),r=M(w.bk_centre_name),a=$(w.mobile_e164);if(n||r||a)return A({name:n,bk_centre_name:r,mobile_e164:a}),void q(!1);const s={name:w.name,bk_centre_name:w.bk_centre_name,mobile_e164:w.mobile_e164,...v},o=await j(s);o.success||(E(o.error||e("auth.registrationFailed")),q(!1))},"handleSubmit");return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-teal-800 to-emerald-900 flex items-center justify-center p-4",children:[r.jsx("div",{className:"absolute top-4 right-4",children:r.jsx(b,{})}),r.jsx("div",{className:"w-full max-w-md",children:r.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 shadow-2xl border border-white/20",children:[r.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[r.jsx(a,{className:"w-10 h-10 text-teal-300"}),r.jsx("h1",{className:"text-3xl font-bold text-white",children:e("auth.register")})]}),r.jsx("p",{className:"text-teal-200 text-center mb-8",children:e("auth.registerSubtitle")}),r.jsxs("form",{onSubmit:z,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center gap-2 text-white mb-2 font-medium",children:[r.jsx(s,{className:"w-4 h-4"}),e("auth.name")]}),r.jsx("input",{type:"text",value:w.name,onChange:__name(e=>{const t=e.target.value;N({...w,name:t}),A(e=>({...e,name:I(t)}))},"onChange"),onBlur:__name(e=>A(t=>({...t,name:I(e.target.value)})),"onBlur"),className:`w-full px-4 py-3 bg-white/10 border ${L.name?"border-red-500":"border-white/20"} rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-teal-400 transition-colors`,placeholder:e("auth.namePlaceholder"),required:!0}),L.name&&r.jsx("p",{className:"text-red-400 text-sm mt-1",children:L.name})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center gap-2 text-white mb-2 font-medium",children:[r.jsx(o,{className:"w-4 h-4"}),"BK Centre Name"]}),r.jsx("input",{type:"text",value:w.bk_centre_name,onChange:__name(e=>{const t=e.target.value;N({...w,bk_centre_name:t}),A(e=>({...e,bk_centre_name:M(t)}))},"onChange"),onBlur:__name(e=>A(t=>({...t,bk_centre_name:M(e.target.value)})),"onBlur"),className:`w-full px-4 py-3 bg-white/10 border ${L.bk_centre_name?"border-red-500":"border-white/20"} rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-teal-400 transition-colors`,placeholder:"Enter your BK Centre name",required:!0}),L.bk_centre_name&&r.jsx("p",{className:"text-red-400 text-sm mt-1",children:L.bk_centre_name})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center gap-2 text-white mb-2 font-medium",children:[r.jsx(i,{className:"w-4 h-4"}),e("auth.mobileNumber")]}),r.jsx("div",{className:"phone-input-wrapper",children:r.jsx(l,{country:"in",value:w.mobile_e164,onChange:R,inputClass:L.mobile_e164?"phone-input-error":"",containerClass:"phone-input-container",buttonClass:"phone-input-button",dropdownClass:"phone-input-dropdown",inputProps:{required:!0,autoFocus:!1},countryCodeEditable:!1,disableDropdown:!1,enableSearch:!0,searchPlaceholder:"Search country"})}),L.mobile_e164&&r.jsx("p",{className:"text-red-400 text-sm mt-1",children:L.mobile_e164})]}),r.jsx("div",{className:"hidden",children:r.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(d,{className:"w-5 h-5 text-teal-400"}),r.jsx("h3",{className:"text-white font-semibold",children:"Location Information"})]}),"requesting"===_&&r.jsxs("div",{className:"flex items-center gap-3 text-teal-300",children:[r.jsx(c,{className:"w-5 h-5 animate-spin"}),r.jsx("span",{children:"Detecting your location..."})]}),"success"===_&&v&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-2 text-green-400 mb-2",children:[r.jsx(m,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Location detected successfully!"}),r.jsx("p",{className:"text-sm text-teal-300 mt-1",children:g(v)})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[v.country&&r.jsxs("div",{children:[r.jsx("label",{className:"text-white/70 block mb-1",children:"Country"}),r.jsx("div",{className:"bg-white/5 px-3 py-2 rounded text-white border border-white/10",children:v.country})]}),v.state&&r.jsxs("div",{children:[r.jsx("label",{className:"text-white/70 block mb-1",children:"State"}),r.jsx("div",{className:"bg-white/5 px-3 py-2 rounded text-white border border-white/10",children:v.state})]}),v.district&&r.jsxs("div",{children:[r.jsx("label",{className:"text-white/70 block mb-1",children:"District"}),r.jsx("div",{className:"bg-white/5 px-3 py-2 rounded text-white border border-white/10",children:v.district})]}),v.city_town&&r.jsxs("div",{children:[r.jsx("label",{className:"text-white/70 block mb-1",children:"City/Town"}),r.jsx("div",{className:"bg-white/5 px-3 py-2 rounded text-white border border-white/10",children:v.city_town})]})]}),v.location_accuracy&&r.jsxs("p",{className:"text-xs text-teal-400 flex items-center gap-1 mt-2",children:[r.jsx(h,{className:"w-3 h-3"}),"GPS Accuracy: Â±",Math.round(v.location_accuracy),"m"]})]}),("error"===_||"denied"===_)&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"p-3 bg-orange-500/10 border border-orange-500/30 rounded text-orange-300 text-sm",children:k}),r.jsxs("button",{type:"button",onClick:F,className:"w-full py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg text-sm transition-colors flex items-center justify-center gap-2",children:[r.jsx(h,{className:"w-4 h-4"}),"Try Again"]})]})]})}),D&&r.jsx("div",{className:"p-4 bg-red-500/20 border border-red-500/50 rounded-lg text-red-200 text-sm",children:D}),r.jsx("button",{type:"submit",disabled:S||!K(),className:"w-full py-3 bg-gradient-to-r from-teal-500 to-emerald-600 text-white rounded-lg font-semibold hover:shadow-lg hover:shadow-teal-500/50 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:S?e("common.loading"):"Create Account"})]}),!1,r.jsx("div",{className:"mt-6 text-center",children:r.jsxs("p",{className:"text-white/70",children:[e("auth.alreadyRegistered")," ",r.jsx("a",{href:"/login",className:"text-teal-300 hover:text-teal-200 font-semibold transition-colors",children:e("auth.loginHere")})]})})]})}),r.jsx("style",{children:"\n        .phone-input-container {\n          width: 100%;\n        }\n\n        .phone-input-container input {\n          width: 100% !important;\n          height: 48px;\n          background: rgba(255, 255, 255, 0.1) !important;\n          border: 1px solid rgba(255, 255, 255, 0.2) !important;\n          border-radius: 0.5rem !important;\n          color: white !important;\n          font-size: 1rem;\n          padding-left: 48px !important;\n        }\n\n        .phone-input-container input::placeholder {\n          color: rgba(255, 255, 255, 0.5) !important;\n        }\n\n        .phone-input-container input:focus {\n          outline: none !important;\n          border-color: rgb(45, 212, 191) !important;\n        }\n\n        .phone-input-error {\n          border-color: rgb(239, 68, 68) !important;\n        }\n\n        .phone-input-button {\n          background: rgba(255, 255, 255, 0.1) !important;\n          border: 1px solid rgba(255, 255, 255, 0.2) !important;\n          border-right: none !important;\n          border-radius: 0.5rem 0 0 0.5rem !important;\n        }\n\n        .phone-input-button:hover {\n          background: rgba(255, 255, 255, 0.15) !important;\n        }\n\n        .phone-input-dropdown {\n          background: rgb(17, 94, 89) !important;\n          color: white !important;\n          border: 1px solid rgba(255, 255, 255, 0.2) !important;\n        }\n\n        .phone-input-dropdown .search {\n          background: rgba(255, 255, 255, 0.1) !important;\n          border: 1px solid rgba(255, 255, 255, 0.2) !important;\n        }\n\n        .phone-input-dropdown .search input {\n          background: transparent !important;\n          color: white !important;\n        }\n\n        .phone-input-dropdown .country:hover {\n          background: rgba(255, 255, 255, 0.1) !important;\n        }\n\n        .phone-input-dropdown .country.highlight {\n          background: rgba(45, 212, 191, 0.2) !important;\n        }\n      "})]})},"Register");export{j as Register};
