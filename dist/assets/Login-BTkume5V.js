var e=Object.defineProperty,__name=(t,n)=>e(t,"name",{value:n,configurable:!0});import{r as t,j as n,X as r,u as a,a6 as o,a7 as s,a8 as i}from"./vendor-react-B3cVin9Q.js";import{u as l}from"./index-BxZ87--W.js";import{s as d,L as c}from"./page-admin-cU6anLI0.js";import"./vendor-other-D9QTidg2.js";import"./vendor-three-DgmlkwHn.js";import"./vendor-i18n-DgyYewF3.js";import"./vendor-supabase-BYHeWUli.js";const h=__name(({isOpen:e,onClose:a})=>{const[o,s]=t.useState(""),[i,l]=t.useState(""),[c,h]=t.useState(!0);t.useEffect(()=>{e&&p()},[e]);const p=__name(async()=>{h(!0);const{data:e}=await d.from("help_settings").select("*").eq("is_active",!0).order("updated_at",{ascending:!1}).limit(1),t=Array.isArray(e)&&e.length>0?e[0]:null;t&&(s(t.youtube_url||""),l(t.image_url||"")),h(!1)},"fetchHelpSettings"),u=__name(e=>{if(!e)return"";if(e.includes("embed"))return e;const t=e.match(/(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return t&&t[1]?`https://www.youtube.com/embed/${t[1]}`:""},"getEmbedUrl");if(!e)return null;const m=__name(()=>{const e=u(o);if(e){const t=e.replace("/embed/","/watch?v=");window.open(t,"_blank","width=1000,height=700,resizable=yes,scrollbars=yes")}},"handleOpenVideo"),b=__name(()=>{i&&window.open(i,"_blank","width=1000,height=700,resizable=yes,scrollbars=yes")},"handleOpenImage");return n.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-gradient-to-br from-teal-900 to-blue-900 rounded-2xl max-w-md w-full shadow-2xl border border-teal-500/30",children:[n.jsxs("div",{className:"bg-gradient-to-br from-teal-900 to-blue-900 p-4 border-b border-teal-500/30 flex justify-between items-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-white",children:"Project Help"}),n.jsx("button",{onClick:a,className:"text-teal-300 hover:text-white transition-colors",children:n.jsx(r,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"p-4 space-y-3",children:c?n.jsx("div",{className:"text-center text-teal-300 py-12",children:"Loading help content..."}):n.jsxs(n.Fragment,{children:[o&&u(o)?n.jsx("button",{onClick:m,className:"w-full bg-white/10 hover:bg-white/20 border border-teal-500/30 rounded-lg p-4 transition-all duration-300 hover:shadow-lg hover:shadow-teal-500/20",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"bg-red-500 rounded-lg p-3",children:n.jsx("svg",{className:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"})})}),n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("h3",{className:"text-lg font-semibold text-white",children:"Help Video"}),n.jsx("p",{className:"text-teal-300 text-xs",children:"Click to open in popup"})]})]})}):null,i?n.jsx("button",{onClick:b,className:"w-full bg-white/10 hover:bg-white/20 border border-teal-500/30 rounded-lg p-4 transition-all duration-300 hover:shadow-lg hover:shadow-teal-500/20",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"bg-blue-500 rounded-lg p-3",children:n.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("h3",{className:"text-lg font-semibold text-white",children:"Help Guide"}),n.jsx("p",{className:"text-teal-300 text-xs",children:"Click to open in popup"})]})]})}):null,!o&&!i&&n.jsxs("div",{className:"text-center text-teal-300 py-8",children:[n.jsx("p",{className:"text-base",children:"No help content available yet."}),n.jsx("p",{className:"text-xs mt-2",children:"Contact the administrator to add help resources."})]})]})})]})})},"HelpModal"),p=__name(()=>{const{t:e}=a(),{login:r}=l(),[d,p]=t.useState(""),[u,m]=t.useState(!1),[b,x]=t.useState(!1),[g,w]=t.useState(""),[j,f]=t.useState(""),v=t.useRef(null),[N,y]=t.useState(!1),k=__name(e=>e?e.replace(/\D/g,"").length<10?"Please enter a valid 10-digit mobile number":"":"Mobile number is required","validateMobileNumber"),S=__name(()=>Boolean(d)&&!j,"isFormValid"),C=__name(e=>{const t=e.startsWith("+")?e:`+${e}`;p(t),f(k(e))},"handlePhoneChange"),z=__name(async t=>{t.preventDefault(),w(""),m(!0);const n=k(d);if(n)return f(n),void m(!1);const a=d.match(/^(\+\d+)(\d+)$/);if(!a)return f("Invalid phone number format"),void m(!1);const o=a[1],s=a[2],i=await r(s,o);i.success||(w(i.error||e("auth.loginFailed")),m(!1))},"handleSubmit");return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-teal-800 to-emerald-900 flex flex-col items-center justify-center p-4",children:[n.jsx("div",{className:"absolute top-4 right-4",children:n.jsx(c,{})}),n.jsxs("div",{className:"w-full max-w-md",children:[n.jsx(h,{isOpen:N,onClose:__name(()=>y(!1),"onClose")}),n.jsxs("div",{className:"mb-6 text-center",children:[n.jsxs("p",{className:"text-white/70 text-lg mb-3",children:[e("auth.notRegistered")," "]}),n.jsx("a",{href:"/register",className:"inline-block px-6 py-3 text-2xl font-bold text-amber-400 bg-gradient-to-r from-amber-500/30 to-yellow-500/30 rounded-xl border-2 border-amber-400 animate-register-blink hover:scale-110 transition-transform duration-300",children:e("auth.registerHere")})]}),n.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 shadow-2xl border border-white/20",children:[n.jsx("div",{className:"relative mb-6",children:n.jsxs("div",{className:"flex items-center justify-center gap-3",children:[n.jsx(o,{className:"w-10 h-10 text-teal-300"}),n.jsx("h1",{className:"text-3xl font-bold text-white",children:e("auth.login")})]})}),n.jsx("p",{className:"text-teal-200 text-center mb-8",children:e("auth.loginSubtitle")}),n.jsxs("form",{ref:v,onSubmit:z,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"flex items-center gap-2 text-white mb-2 font-medium",children:[n.jsx(s,{className:"w-4 h-4"}),e("auth.mobileNumber")]}),n.jsx("div",{className:"phone-input-wrapper",children:n.jsx(i,{country:"in",value:d,onChange:C,inputClass:j?"phone-input-error":"",containerClass:"phone-input-container",buttonClass:"phone-input-button",dropdownClass:"phone-input-dropdown",inputProps:{required:!0,autoFocus:!1,onKeyDown:__name(e=>{if("Enter"===e.key){e.preventDefault();const t=v.current;t&&("function"==typeof t.requestSubmit?t.requestSubmit():t.dispatchEvent(new Event("submit",{bubbles:!0,cancelable:!0})))}},"onKeyDown")},countryCodeEditable:!1,disableDropdown:!1,enableSearch:!0,searchPlaceholder:"Search country"})}),j&&n.jsx("p",{className:"text-red-400 text-sm mt-1",children:j})]}),g&&n.jsx("div",{className:"p-4 bg-red-500/20 border border-red-500/50 rounded-lg text-red-200 text-sm",children:g}),n.jsx("button",{type:"submit",disabled:u||!S(),className:"w-full py-3 bg-gradient-to-r from-teal-500 to-emerald-600 text-white rounded-lg font-semibold hover:shadow-lg hover:shadow-teal-500/50 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:e(u?"common.loading":"auth.loginButton")})]}),!1]})]}),n.jsx("style",{children:"\n        .phone-input-container {\n          width: 100%;\n        }\n\n        .phone-input-container input {\n          width: 100% !important;\n          height: 48px;\n          background: rgba(255, 255, 255, 0.1) !important;\n          border: 1px solid rgba(255, 255, 255, 0.2) !important;\n          border-radius: 0.5rem !important;\n          color: white !important;\n          font-size: 1rem;\n          padding-left: 48px !important;\n        }\n\n        .phone-input-container input::placeholder {\n          color: rgba(255, 255, 255, 0.5) !important;\n        }\n\n        .phone-input-container input:focus {\n          outline: none !important;\n          border-color: rgb(45, 212, 191) !important;\n        }\n\n        .phone-input-error {\n          border-color: rgb(239, 68, 68) !important;\n        }\n\n        .phone-input-button {\n          background: rgba(255, 255, 255, 0.1) !important;\n          border: 1px solid rgba(255, 255, 255, 0.2) !important;\n          border-right: none !important;\n          border-radius: 0.5rem 0 0 0.5rem !important;\n        }\n\n        .phone-input-button:hover {\n          background: rgba(255, 255, 255, 0.15) !important;\n        }\n\n        .phone-input-dropdown {\n          background: rgb(17, 94, 89) !important;\n          color: white !important;\n          border: 1px solid rgba(255, 255, 255, 0.2) !important;\n        }\n\n        .phone-input-dropdown .search {\n          background: rgba(255, 255, 255, 0.1) !important;\n          border: 1px solid rgba(255, 255, 255, 0.2) !important;\n        }\n\n        .phone-input-dropdown .search input {\n          background: transparent !important;\n          color: white !important;\n        }\n\n        .phone-input-dropdown .country:hover {\n          background: rgba(255, 255, 255, 0.1) !important;\n        }\n\n        .phone-input-dropdown .country.highlight {\n          background: rgba(45, 212, 191, 0.2) !important;\n        }\n      "})]})},"Login");export{p as Login};
