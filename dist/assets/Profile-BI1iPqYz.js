import{u as A,r as a,j as e,k as P,a1 as p,b as I,a7 as M,a6 as R,G as L,N,X as q,ad as D,C as w}from"./vendor-react-CsWuKxj5.js";import{u as G}from"./index-DwrExZEh.js";import"./vendor-other-D2N4SXMU.js";import"./vendor-three-WWH58ZbN.js";import"./vendor-i18n-CPrbmvBl.js";import"./vendor-supabase-D4rA0elu.js";import"./page-admin-DgYsNXAM.js";const X=({onBack:v})=>{const{t:s}=A(),{user:l,updateUserProfile:y}=G(),[n,c]=a.useState(!1),[d,u]=a.useState(!1),[m,r]=a.useState(null),[x,g]=a.useState(""),[h,f]=a.useState(""),[o,j]=a.useState(""),[i,b]=a.useState({});if(!l)return null;const k=t=>t?new Date(t).toLocaleString():s("profile.notAvailable"),C=()=>{g(l.name||""),f(l.bk_centre_name||""),j(l.mobile_e164||""),b({}),r(null),c(!0)},S=()=>{c(!1),b({}),r(null)},E=()=>{const t={};return x.trim()||(t.name=s("profile.nameRequired")),h.trim()||(t.centreName=s("profile.centreNameRequired")),(!o.trim()||!o.startsWith("+"))&&(t.mobile=s("profile.invalidMobile")),b(t),Object.keys(t).length===0},_=async()=>{if(!E())return;u(!0),r(null);const t=await y({name:x,bk_centre_name:h,mobile_e164:o});u(!1),t.success?(r({type:"success",text:s("profile.updateSuccess")}),c(!1),setTimeout(()=>r(null),5e3)):r({type:"error",text:t.error||s("profile.updateError")})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-teal-800 to-emerald-900 text-white",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("button",{onClick:v,className:"flex items-center gap-2 text-teal-300 hover:text-teal-200 transition-colors mb-6",children:[e.jsx(P,{className:"w-5 h-5"}),s("common.back")]}),e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 shadow-2xl border border-white/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(p,{className:"w-10 h-10 text-teal-300"}),e.jsx("h1",{className:"text-3xl font-bold",children:s("profile.title")})]}),!n&&e.jsxs("button",{onClick:C,className:"flex items-center gap-2 bg-teal-600 hover:bg-teal-700 px-4 py-2 rounded-lg transition-colors",children:[e.jsx(I,{className:"w-4 h-4"}),s("profile.editButton")]})]}),m&&e.jsx("div",{className:`mb-6 p-4 rounded-lg ${m.type==="success"?"bg-green-500/20 border border-green-500/50 text-green-100":"bg-red-500/20 border border-red-500/50 text-red-100"}`,children:m.text}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-teal-300 mb-4 flex items-center gap-2",children:[e.jsx(p,{className:"w-5 h-5"}),s("profile.personalInfo")]}),e.jsxs("div",{className:"bg-white/5 rounded-xl p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-white/70 text-sm mb-2 block",children:s("profile.name")}),n?e.jsxs("div",{children:[e.jsx("input",{type:"text",value:x,onChange:t=>g(t.target.value),className:"w-full bg-white/10 px-4 py-3 rounded-lg border border-white/20 text-white focus:outline-none focus:ring-2 focus:ring-teal-400",placeholder:s("profile.name")}),i.name&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:i.name})]}):e.jsxs("div",{className:"flex items-center gap-3 bg-white/10 px-4 py-3 rounded-lg border border-white/10",children:[e.jsx(p,{className:"w-5 h-5 text-teal-400"}),e.jsx("span",{className:"text-white font-medium",children:l.name||s("profile.notAvailable")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-white/70 text-sm mb-2 block",children:s("profile.mobileNumber")}),n?e.jsxs("div",{children:[e.jsx(M,{country:"in",value:o,onChange:t=>j(t.startsWith("+")?t:`+${t}`),inputStyle:{width:"100%",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"0.5rem",color:"white",padding:"0.75rem 3rem",fontSize:"1rem"},buttonStyle:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"0.5rem 0 0 0.5rem"},dropdownStyle:{background:"#1e293b",color:"white"},containerClass:"phone-input-container",enableSearch:!0,searchPlaceholder:"Search country..."}),i.mobile&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:i.mobile})]}):e.jsxs("div",{className:"flex items-center gap-3 bg-white/10 px-4 py-3 rounded-lg border border-white/10",children:[e.jsx(R,{className:"w-5 h-5 text-teal-400"}),e.jsx("span",{className:"text-white font-medium",children:l.mobile_e164||s("profile.notAvailable")})]})]})]}),l.email&&e.jsxs("div",{children:[e.jsx("label",{className:"text-white/70 text-sm mb-2 block",children:s("profile.email")}),e.jsxs("div",{className:"flex items-center gap-3 bg-white/10 px-4 py-3 rounded-lg border border-white/10",children:[e.jsx(L,{className:"w-5 h-5 text-teal-400"}),e.jsx("span",{className:"text-white font-medium",children:l.email})]})]})]})]}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-teal-300 mb-4 flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5"}),s("profile.bkCentreInfo")]}),e.jsx("div",{className:"bg-white/5 rounded-xl p-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-white/70 text-sm mb-2 block",children:s("profile.bkCentreName")}),n?e.jsxs("div",{children:[e.jsx("input",{type:"text",value:h,onChange:t=>f(t.target.value),className:"w-full bg-white/10 px-4 py-3 rounded-lg border border-white/20 text-white focus:outline-none focus:ring-2 focus:ring-teal-400",placeholder:s("profile.bkCentreName")}),i.centreName&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:i.centreName})]}):e.jsxs("div",{className:"flex items-center gap-3 bg-white/10 px-4 py-3 rounded-lg border border-white/10",children:[e.jsx(N,{className:"w-5 h-5 text-teal-400"}),e.jsx("span",{className:"text-white font-medium",children:l.bk_centre_name||s("profile.notAvailable")})]})]})})]}),n&&e.jsxs("div",{className:"flex gap-4 justify-end",children:[e.jsxs("button",{onClick:S,disabled:d,className:"flex items-center gap-2 bg-gray-600 hover:bg-gray-700 disabled:bg-gray-500 disabled:cursor-not-allowed px-6 py-3 rounded-lg transition-colors",children:[e.jsx(q,{className:"w-4 h-4"}),s("profile.cancelEdit")]}),e.jsxs("button",{onClick:_,disabled:d,className:"flex items-center gap-2 bg-teal-600 hover:bg-teal-700 disabled:bg-teal-500 disabled:cursor-not-allowed px-6 py-3 rounded-lg transition-colors",children:[e.jsx(D,{className:"w-4 h-4"}),s(d?"common.saving":"profile.saveChanges")]})]}),!1,l.last_login&&e.jsxs("section",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-teal-300 mb-4 flex items-center gap-2",children:[e.jsx(w,{className:"w-5 h-5"}),s("profile.accountActivity")]}),e.jsx("div",{className:"bg-white/5 rounded-xl p-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-white/70 text-sm mb-2 block",children:s("profile.lastLogin")}),e.jsxs("div",{className:"flex items-center gap-3 bg-white/10 px-4 py-3 rounded-lg border border-white/10",children:[e.jsx(w,{className:"w-5 h-5 text-teal-400"}),e.jsx("span",{className:"text-white font-medium",children:k(l.last_login)})]})]})})]})]})]})})]})})};export{X as Profile};
