import{r as l,j as e,k as N,g as _,F as S,X as k}from"./vendor-react-CsWuKxj5.js";import{L as E,s as V}from"./page-admin-DgYsNXAM.js";import"./vendor-other-D2N4SXMU.js";import"./vendor-three-WWH58ZbN.js";import"./vendor-i18n-CPrbmvBl.js";import"./vendor-supabase-D4rA0elu.js";const W=({onBack:f})=>{const[a,p]=l.useState([]),[g,u]=l.useState(!0),[o,w]=l.useState(""),[i,m]=l.useState(null);l.useEffect(()=>{(async()=>{u(!0);const{data:s,error:r}=await V.from("good_wishes_videos").select("*").eq("is_active",!0).order("order_index",{ascending:!0});!r&&s&&p(s),u(!1)})()},[]);const c=l.useMemo(()=>{const t=o.trim().toLowerCase();return t?a.filter(s=>s.title.toLowerCase().includes(t)):a},[a,o]),j="https://www.youtube.com/watch?v=KSERWqXhPfI",v="Good Wishes - BK Santosh Didi - Russia",d=l.useMemo(()=>({id:"fallback",title:v,youtube_url:j,thumbnail_url:null,is_active:!0,order_index:0,created_at:new Date().toISOString()}),[]),h=l.useMemo(()=>c.length>0?c:d?[d]:[],[c,d]),x=t=>{if(!t)return null;const s=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/,/youtube\.com\/watch\?.*v=([a-zA-Z0-9_-]{11})/];for(const r of s){const n=t.match(r);if(n&&n[1])return n[1]}return null},y=t=>{if(!t)return"";const s=x(t);if(s)return`https://www.youtube.com/embed/${s}?autoplay=1&mute=0`;if(t.includes("embed")){const r=t.includes("?")?"&":"?";return`${t}${r}autoplay=1&mute=0`}return""},b=t=>{if(t.thumbnail_url)return t.thumbnail_url;const s=x(t.youtube_url);return s?`https://img.youtube.com/vi/${s}/hqdefault.jpg`:""};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-teal-800 to-emerald-900 text-white",children:[e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx(E,{})}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsxs("button",{onClick:f,className:"flex items-center gap-2 text-teal-300 hover:text-teal-200 transition-colors",children:[e.jsx(N,{className:"w-5 h-5"}),"Back to Dashboard"]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-teal-400 via-cyan-400 to-blue-400",children:"Good Wishes"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 shadow-2xl border border-teal-500/20",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:e.jsxs("div",{className:"relative w-full md:w-96",children:[e.jsx(_,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-teal-300"}),e.jsx("input",{type:"text",value:o,onChange:t=>w(t.target.value),placeholder:"Search videos by title",className:"w-full pl-10 pr-4 py-3 bg-white/5 border border-teal-500/30 rounded-lg text-white placeholder-teal-400 focus:outline-none focus:border-teal-500 transition-colors"})]})}),g?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:8}).map((t,s)=>e.jsxs("div",{className:"bg-white/5 rounded-2xl overflow-hidden border border-teal-500/20 animate-pulse",children:[e.jsx("div",{className:"aspect-video bg-white/10"}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"h-5 bg-white/10 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-white/10 rounded w-2/3"})]})]},s))}):h.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-teal-300 text-lg",children:"No videos found."})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:h.map(t=>e.jsxs("button",{onClick:()=>m(t),className:"text-left bg-gradient-to-br from-teal-900/40 to-blue-900/40 backdrop-blur-lg rounded-2xl overflow-hidden shadow-2xl border border-teal-500/20 hover:border-teal-500/40 transition-all duration-300 hover:scale-[1.02]",children:[e.jsx("div",{className:"relative aspect-video bg-black/50",children:b(t)?e.jsx("img",{src:b(t),alt:t.title,className:"w-full h-full object-cover",onError:s=>{s.currentTarget.style.display="none"}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(S,{className:"w-16 h-16 text-teal-400 opacity-50"})})}),e.jsx("div",{className:"p-4",children:e.jsx("h3",{className:"text-lg font-semibold text-white line-clamp-2",children:t.title})})]},t.id))})]})]}),i&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"max-w-7xl w-full",children:[e.jsx("div",{className:"flex justify-end mb-3",children:e.jsxs("button",{onClick:()=>m(null),className:"flex items-center gap-2 px-4 py-2 bg-white/10 text-white rounded-lg font-semibold hover:bg-white/20 transition",children:[e.jsx(k,{className:"w-5 h-5"}),"Close"]})}),e.jsx("div",{className:"aspect-video bg-black rounded-xl overflow-hidden border border-teal-500/30 shadow-2xl",children:e.jsx("iframe",{src:y(i.youtube_url),title:i.title,className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0})})]})})]})};export{W as GoodWishes};
